@page "/utilisateurs"
@using BlazorApp1.Components.Data
@using BlazorApp1.Services
@inject MongoDBService MongoDBService

<h3>Liste des utilisateurs</h3>

@if (utilisateurs == null)
{
    <p>Chargement...</p>
}
else
{
    <ul>
        @foreach (var utilisateur in utilisateurs)
        {
            <li>@utilisateur.Nom - @utilisateur.Email</li>
        }
    </ul>
}

@code {
    private List<Utilisateur> utilisateurs;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            utilisateurs = await MongoDBService.GetAllAsync();
        }
        catch (Exception ex)
        {
            // Gestion d'erreur si la récupération échoue
            Console.WriteLine($"Erreur lors de la récupération des utilisateurs : {ex.Message}");
        }
    }
}
